!function(t){var e={};function s(i){if(e[i])return e[i].exports;var h=e[i]={i:i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,s),h.l=!0,h.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)s.d(i,h,function(e){return t[e]}.bind(null,h));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i{constructor(t,e,s,i,h){this.type=t,this.id=e,this.inner=s,this.mode=i,this.parent=h,this.creat()}creat(){var t=this.mode;this.button=document.createElement(this.type),this.button.id=this.id,this.button.innerHTML=this.inner,parent=this.parent,this.button.onclick=function(){parent.gameMode=t},document.body.appendChild(this.button)}change(t,e,s){switch(parent=this.parent,t){case"zIndex":this.button.style.zIndex=e;break;case"inner":this.button.innerHTML=e;break;case"onclick":this.button.onclick=function(){parent.gameMode=e}}}}class h{constructor(){this.context=document.getElementById("myCanvas").getContext("2d")}rotateObject(t,e,s,i,h,o){this.context.save(),this.context.translate(t,e),this.context.rotate(h),this.context.drawImage(o,s/-2,i/-2),this.context.restore()}creatText(t,e,s,i,h){this.context.fillStyle=i,this.context.font=s+" Arial",this.context.textAlign="center",this.context.fillText(h,t,e)}createCircle(t,e,s,i){this.context.beginPath(),this.context.arc(t,e,s,0,2*Math.PI),this.context.fillStyle=i,this.context.fill(),this.context.stroke()}clear(t,e,s,i,h){this.context.clearRect(t,e,s,i)}deleteObject(t){return t.x<-40||t.x>1100||t.y<-40||t.y>600}}class o extends h{constructor(t,e,s,i,h,o){super(),this.x=t,this.y=e,this.width=s,this.height=i,this.type=o,this.speed=0,this.angle=0,this.myShots=[],this.moveAngle=0,this.image=new Image,this.image.src=h}creat(){if("bg"==this.type)this.context.drawImage(this.image,this.x,this.y);else{(this.speed<0&&this.speed>-2||this.speed>0&&this.speed<2)&&(this.speed*=.995),this.angle+=this.moveAngle*Math.PI/180;var t=this.speed*Math.sin(this.angle),e=this.speed*Math.cos(this.angle);this.x+t>1e3||this.x+t<=0||this.y-e>500||this.y-e<=0||(this.x+=t,this.y-=e),this.rotateObject(this.x,this.y,this.width,this.height,this.angle,this.image)}}collison(t){var e=[this.x+1*Math.cos(this.angle)-t.x,this.y+3*Math.sin(this.angle)-t.y];return Math.sqrt(e[0]*e[0]+e[1]*e[1])<=this.width/2+2}}class n extends h{constructor(t,e,s,i){super(),this.x=t,this.y=e,this.color=s,this.pixel=i}creat(t){this.creatText(this.x,this.y,this.pixel,this.color,t)}}class a extends h{constructor(t,e,s,i,h,o){super(),this.width=h,this.color=o,this.speed=0,this.para_x=t,this.para_y=e,this.vector_x=s,this.vector_y=i,this.length=Math.sqrt(this.vector_x*this.vector_x+this.vector_y*this.vector_y),this.x=this.para_x+this.vector_x*this.speed,this.y=this.para_y+this.vector_y*this.speed}creat(t){this.speed+=40/this.length*t,this.x=this.para_x+this.vector_x*this.speed,this.y=this.para_y+this.vector_y*this.speed,this.createCircle(this.x,this.y,this.width,this.color)}}class r extends h{constructor(t,e,s,i){super(),this.x=t,this.y=e,this.radius=s,this.color=i,this.speed=0,this.angle=0,this.bubblesShot=!1}creat(){this.createCircle(this.x,this.y,this.radius,this.color)}attack(t){var e=[t.x- -50*Math.sin(t.angle)-this.x,t.y+-50*Math.cos(t.angle)-this.y];this.bubblesShot=new a(this.x,this.y,e[0],e[1],5,"green")}collison(t){var e=[this.x+2.5-t.x,this.y-2.5-t.y];return Math.sqrt(e[0]*e[0]+e[1]*e[1])<=t.width+this.radius}}class l extends h{constructor(){super(),this.score=0,this.frames=0,this.playersName=!1,this.life=0,this.sound=!1,this.shot=!0,this.bubbles=[],this.gameMode=0,this.buttons=[],this.buttons.push(this.startButton=new i("div","startButton","Start",1,this)),this.buttons.push(this.helpButton=new i("div","helpButton","Help",3,this)),this.buttons.push(this.scoreButton=new i("div","scoreButton","Score",4,this)),this.buttons.push(this.backButton=new i("div","backButton","Main Menu",0,this)),this.backButton.change("zIndex",-1),this.statusButton=document.createElement("img"),this.statusButton.src="../images/pause.png",this.statusButton.id="statusButton",document.body.appendChild(this.statusButton),this.audioButton=document.createElement("img"),this.audioButton.src="../images/soundon.png",this.audioButton.id="audioButton",document.body.appendChild(this.audioButton),this.shotSound=new Audio("../sounds/strela.mp3"),this.matchSound=new Audio("../sounds/pop.mp3"),this.gameoverSound=new Audio("../sounds/game_over.mp3"),this.gameoverSound=new Audio("../sounds/game_over.mp3"),this.contactSound=new Audio("../sounds/kontakt.mp3"),this.helpImg=document.createElement("img"),this.helpImg.src="../images/help.png",this.helpImg.id="helpImg",document.body.appendChild(this.helpImg),this.player=new o(500,250,38,28,"../images/jet.png","none"),this.backGround=new o(0,0,750,500,"../images/background.png","bg"),this.lifeImg=new o(100,100,128,32,"../images/life3.png","none"),this.title=new n(500,120,"red","100px"),this.showScore=new n(150,70,"white","50px")}mainMenu(){this.backGround.creat(),this.title.creat("Bubble War"),this.frames=0;for(var t=0;t<this.buttons.length-1;t++)this.buttons[t].change("zIndex",1);this.backButton.change("zIndex",-1),this.statusButton.style.zIndex=this.audioButton.style.zIndex=this.helpImg.style.zIndex=-1,this.helpButton.change("inner","Help"),this.helpButton.change("onclick",3,this),this.showScore.x=150,this.showScore.y=70,this.life=3}game(t){0==this.frames&&(this.score=0),this.frames++;for(var e=0;e<this.buttons.length;e++)this.buttons[e].change("zIndex",-1);switch(this.statusButton.style.zIndex=this.audioButton.style.zIndex=1,this.statusButton.onclick=function(){gameMode=5},this.statusButton.src="../images/pause.png",this.sound?this.audioButton.onclick=function(){this.sound=!1,this.audioButton.src="../images/soundoff.png"}:this.audioButton.onclick=function(){this.sound=!0,this.audioButton.src="../images/soundon.png"},!0){case this.score<=100:this.levelOne();break;case this.score>100&&this.score<=200:this.levelTwo();break;default:this.levelThree()}this.clear(0,0,1e3,500),this.backGround.creat(),this.lifeImg.creat();for(e=0;e<this.player.myShots.length;e++)this.deleteObject(this.player.myShots[e])&&(this.player.myShots[e]=!1),this.player.myShots[e]&&(this.player.myShots[e].x+=this.player.myShots[e].speed*Math.sin(this.player.myShots[e].angle),this.player.myShots[e].y-=this.player.myShots[e].speed*Math.cos(this.player.myShots[e].angle),this.player.myShots[e].creat());this.player.creat();for(e=0;e<this.bubbles.length;e++)if(this.deleteObject(this.bubbles[e])&&(this.bubbles[e]=!1),this.bubbles[e]){if(this.bubbles[e].x+=this.bubbles[e].speed*Math.sin(this.bubbles[e].angle)*1,this.bubbles[e].y-=this.bubbles[e].speed*Math.cos(this.bubbles[e].angle)*1,this.bubbles[e].creat(),this.player.collison(this.bubbles[e])){this.bubbles[e]=!1,this.life--,this.life>0&&this.sound?this.contactSound.play():this.sound&&this.gameoverSound.play(),this.player.x=Math.floor(900*Math.random()),this.player.y=Math.floor(400*Math.random()),0==this.life?this.gameMode=2:this.lifeImg.image.src=2==this.life?"../images/life2.png":"../images/life1.png";break}this.bubbles[e].bubblesShot&&(this.bubbles[e].bubblesShot.creat(t),this.player.collison(this.bubbles[e].bubblesShot)&&(this.bubbles[e].bubblesShot=!1,this.life--,this.life>0&&this.sound?this.contactSound.play():this.sound&&this.gameoverSound.play(),this.player.x=Math.floor(900*Math.random()),this.player.y=Math.floor(400*Math.random()),0==this.life?this.gameMode=2:this.lifeImg.image.src=2==this.life?"../images/life2.png":"../images/life1.png"))}for(e=0;e<this.bubbles.length;e++)for(var s=0;s<this.player.myShots.length;s++)this.player.myShots[s]&&this.bubbles[e]&&this.bubbles[e].collison(this.player.myShots[s])&&(this.sound&&this.matchSound.play(),this.bubbles[e]=!1,this.player.myShots[s]=!1,this.score+=10);this.showScore.x=150,this.showScore.y=70,this.showScore.color="white",this.showScore.creat("Score: "+this.score)}restartScreen(){this.bubbles=this.player.shot=[],this.player.speed=this.player.moveAngle=this.frames=0,this.backGround.creat(),this.lifeImg.image.src="../images/life3.png",this.statusButton.style.zIndex=this.audioButton.style.zIndex=-1,this.helpButton.change("zIndex",1),this.helpButton.change("inner","Restart"),this.helpButton.change("onclick",1,this),this.backButton.change("zIndex",1),this.title.creat("Game Over!"),this.showScore.x=this.title.x,this.showScore.y=this.title.y+80,this.player.angle=0,this.player.x=500,this.player.y=250,this.life=3}scoreScreen(){this.backGround.creat(),this.showScore.color="red",this.showScore.creat("Best Players");for(var t=0;t<this.buttons.length-1;t++)this.buttons[t].change("zIndex",-1);this.backButton.change("zIndex",1)}helpScreen(){for(var t=0;t<this.buttons.length-1;t++)this.buttons[t].change("zIndex",-1);this.backButton.change("zIndex",1),this.helpImg.style.zIndex=1}pauseScreen(){this.statusButton.onclick=function(){this.gameMode=1},this.statusButton.src="../images/play.png"}levelOne(){if(this.frames%20==0)switch(Math.floor(4*Math.random())+1){case 1:this.bubbles.push(this.creatBubble([120,240],[100,650],[-10,-20],13,"yellow",2));break;case 2:this.bubbles.push(this.creatBubble([65,-65],[100,650],[510,520],13,"yellow",2));break;case 3:this.bubbles.push(this.creatBubble([45,135],[-10,-20],[100,400],13,"yellow",2));break;case 4:this.bubbles.push(this.creatBubble([225,315],[1010,1020],[100,400],13,"yellow",2))}}levelTwo(){if(this.frames%15==0)switch(Math.floor(4*Math.random())+1){case 1:this.bubbles.push(this.creatBubble([120,240],[100,650],[-10,-20],15,"red",2));break;case 2:this.bubbles.push(this.creatBubble([65,-65],[100,650],[510,520],15,"red",2));break;case 3:this.bubbles.push(this.creatBubble([45,135],[-10,-20],[100,400],15,"red",2));break;case 4:this.bubbles.push(this.creatBubble([225,315],[1010,1020],[100,400],15,"red",2))}}levelThree(){if(this.frames%20==0)switch(Math.floor(4*Math.random())+1){case 1:this.bubbles.push(this.creatBubble([120,240],[100,650],[-10,-20],15,"red",2.5));break;case 2:this.bubbles.push(this.creatBubble([65,-65],[100,650],[510,520],15,"red",2.5));break;case 3:this.bubbles.push(this.creatBubble([45,135],[-10,-20],[100,400],15,"red",2.5));break;case 4:this.bubbles.push(this.creatBubble([225,315],[1010,1020],[100,400],15,"red",2.5))}for(var t=0;t<this.bubbles.length;t++)this.bubbles[t]&&this.frames%200==0&&t%15==0&&this.bubbles[t].attack(this.player)}creatBubble(t,e,s,i,h,o){var n=Math.floor(Math.random()*(t[1]-t[0]))+t[0],a=Math.floor(Math.random()*(e[1]-e[0]))+e[0],l=Math.floor(Math.random()*(s[1]-s[0]))+s[0],u=new r(a,l,i,h);return u.speed=o,u.angle=n*Math.PI/180,u}}var u,c;function b(){switch(c.gameMode){case 0:c.mainMenu();break;case 1:var t=Date.now(),e=(t-u)/100;u=t,c.game(e);break;case 2:c.restartScreen();break;case 3:c.helpScreen();break;case 4:c.scoreScreen();break;default:c.pauseScreen()}requestAnimationFrame(b)}(new class{constructor(){this.myChilds=[]}add(t){this.myChilds.push(t)}notify(){console.log("I'm "+this)}}).notify(),window.onload=function(){c=new l,u=Date.now(),b()},window.onkeydown=t=>{27==t.keyCode&&1==c.gameMode?c.gameMode=5:27==t.keyCode&&5==c.gameMode&&(c.gameMode=1),77==t.keyCode&&c.sound?(c.sound=!1,c.audioButton.src="../images/soundoff.png"):77!=t.keyCode||c.sound||(c.sound=!0,c.audioButton.src="../images/soundon.png"),37==t.keyCode&&(c.player.moveAngle=-2),39==t.keyCode&&(c.player.moveAngle=2),40==t.keyCode&&(c.player.speed=-2),38==t.keyCode&&(c.player.speed=2),32==t.keyCode&&c.shot&&(c.sound&&c.shotSound.play(),c.player.myShots.push(new o(c.player.x+2,c.player.y-2,5,5,"../images/bullet.png","none")),c.player.myShots[c.player.myShots.length-1].speed=5,c.player.myShots[c.player.myShots.length-1].angle=c.player.angle,c.shot=!1)},window.onkeyup=t=>{37==t.keyCode&&(c.player.moveAngle=0),39==t.keyCode&&(c.player.moveAngle=0),40==t.keyCode&&(c.player.speed=-1.9),38==t.keyCode&&(c.player.speed=1.9),32==t.keyCode&&(c.shot=!0)}}]);